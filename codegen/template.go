// Copyright Â© yanghy. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and limitations under the License.

package codegen

// autoCodeTemplate è‡ªåŠ¨ä»£ç æ¨¡æ¿
const autoCodeTemplate = `// ==============================================================================
// ğŸ”¥ Code automatically generated by ENERGY GUI Designer. DO NOT EDIT
// ğŸ”¥ ENERGY GUI è®¾è®¡å™¨è‡ªåŠ¨ç”Ÿæˆä»£ç . ä¸èƒ½ç¼–è¾‘
// ==============================================================================
// ğŸ” åŸºæœ¬ä¿¡æ¯
//     ç”Ÿæˆå·¥å…·: ENERGY GUI Designer {{.BaseInfo.DesignerVersion}}
//     ç”Ÿæˆæ—¶é—´: {{.BaseInfo.DateTime}}
//     è®¾è®¡æ–‡ä»¶: {{.BaseInfo.UIFile}}
//     ç”¨æˆ·æ–‡ä»¶: {{.BaseInfo.UserFile}}
//     åŠŸèƒ½æè¿°: åŸºäº ENERGY GUI æ¡†æ¶çš„å®ç°, åŒ…å«UIç»„ä»¶åˆ›å»º
// ==============================================================================

{{$Form := .}}

package {{$Form.PackageName}}

import (
	{{$Form.GoGetImports}}
)

type T{{$Form.Form.Name}} struct {
	lcl.TEngForm
	{{range $Form.Form.Children -}}
	{{.GoFieldName}} {{.GoIntfName}}
	{{end -}}
}

var {{$Form.Form.Name}} T{{$Form.Form.Name}}

// FormCreate çª—ä½“åˆ›å»ºæ¥å£å®ç°. è‡ªåŠ¨è°ƒç”¨
func (m *T{{$Form.Form.Name}}) FormCreate(sender lcl.IObject) {
	// è®¾ç½®çª—ä½“å±æ€§
	{{$formComp := $Form.Form}}
	{{- range $propIndex, $prop := $formComp.Properties -}}
		{{$prop.GoPropertySet $formComp $Form}}
	{{end -}}
	// åˆå§‹åŒ–ç»„ä»¶
	m.initComponents()
    // è°ƒç”¨ç”¨æˆ·åˆ›å»ºçª—ä½“äº‹ä»¶
	m.OnFormCreate(sender)
}

// initComponents åˆå§‹åŒ–ç»„ä»¶
func (m *T{{$Form.Form.Name}}) initComponents() {
    // ç»„ä»¶åˆå§‹åŒ–å’Œè®¾ç½®å±æ€§
	{{range $compIndex, $comp := $Form.Form.Children -}}
		{{$comp.GoNewObject}}
	{{- range $propIndex, $prop := $comp.Properties -}}
		{{$prop.GoPropertySet $comp $Form}}
	{{end -}}
		{{$comp.GoSetObjectParent}}
	{{end -}}
}
`

// userCodeTemplate ç”¨æˆ·ä»£ç æ¨¡æ¿
const userCodeTemplate = `// ==============================================================================
// ğŸ“š {{.BaseInfo.UserFile}} ç”¨æˆ·ä»£ç æ–‡ä»¶
// ğŸ“Œ è¯¥æ–‡ä»¶ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»º
// âœï¸ å¯åœ¨æ­¤æ–‡ä»¶ä¸­æ·»åŠ äº‹ä»¶å¤„ç†å’Œä¸šåŠ¡é€»è¾‘
//    ç”Ÿæˆæ—¶é—´: {{.BaseInfo.DateTime}}
// ==============================================================================

{{$Form := .}}

package {{$Form.PackageName}}

import (
	{{$Form.GoGetImports}}
	"github.com/energye/lcl/types"
)

// OnFormCreate çª—ä½“åˆå§‹åŒ–äº‹ä»¶
func (m *T{{$Form.Form.Name}}) OnFormCreate(sender lcl.IObject) {
	// TODO åœ¨æ­¤å¤„æ·»åŠ çª—ä½“åˆå§‹åŒ–ä»£ç 
}

// OnCloseQuery çª—ä½“å…³é—­å‰è¯¢é—®äº‹ä»¶
func (m *T{{$Form.Form.Name}}) OnCloseQuery(sender lcl.IObject, canClose *bool) {
	// TODO åœ¨æ­¤å¤„æ·»åŠ çª—ä½“å…³é—­å‰è¯¢é—®ä»£ç 
}

// OnClose ä»…å½“ OnCloseQuery ä¸­ CanClose è¢«è®¾ç½®ä¸º True åä¼šè§¦å‘
func (m *T{{$Form.Form.Name}}) OnClose(sender lcl.IObject, closeAction *types.TCloseAction) {
	// TODO åœ¨æ­¤å¤„æ·»åŠ çª—ä½“å…³é—­ä»£ç 
}

{{range $Form.Form.Children}}
// On{{.Name}}Click {{.Name}}ç‚¹å‡»äº‹ä»¶
func (m *T{{$Form.Form.Name}}) On{{.Name}}Click(sender lcl.IObject) {
	// TODO åœ¨æ­¤å¤„æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç†ä»£ç 
}
{{end}}
`

// app/run æ–‡ä»¶ä»£ç æ¨¡æ¿
// app/run.go ä¸å­˜åœ¨é¡¹ç›®ç›®å½•æ—¶åˆ›å»º
const runCodeTemplate = `// ==============================================================================
// ğŸ“š åº”ç”¨å¯åŠ¨å…¥å£æ–‡ä»¶
// ğŸ“Œ è¯¥æ–‡ä»¶ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»º
// âœï¸ å¯åœ¨æ­¤æ–‡ä»¶ä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘
// ==============================================================================

package main

import (
	"github.com/energye/lcl/lcl" 
	{{.WindowsSyso}}
)

func main() {
	lcl.Init(nil, nil)
	lcl.Application.Initialize()
	lcl.Application.SetMainFormOnTaskBar(true)
	lcl.Application.SetScaled(true)
	lcl.Application.NewForms({{.Forms}})
	lcl.Application.Run()
}
`
